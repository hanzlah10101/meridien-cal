<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Mobile Calendar</title>
    <link rel="stylesheet" href="/assets/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/relativeTime.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/localizedFormat.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  </head>
  <body>
    <!-- Add overlay element -->
    <div class="overlay" id="overlay"></div>

    <!-- Full Page Loader -->
    <div class="page-loader" id="pageLoader">
      <div class="spinner"></div>
    </div>

    <main class="app" aria-label="Calendar App">
      <header class="bar">
        <div class="title" aria-live="polite">
          <span class="month" id="label-month">Month</span>
          <select class="year" id="label-year">
            <!-- Year options will be populated by JavaScript -->
          </select>
        </div>
        <div class="nav">
          <button
            class="btn icon secondary"
            id="prev"
            aria-label="Previous month"
          >
            ◀
          </button>
          <button class="btn icon secondary" id="next" aria-label="Next month">
            ▶
          </button>
          <button class="btn secondary" id="today">Today</button>
          <button class="btn secondary" id="logout" title="Logout">↗</button>
        </div>
      </header>
      <section class="calendar" role="grid" aria-labelledby="label-month">
        <div class="weekdays" role="row">
          <div>Sun</div>
          <div>Mon</div>
          <div>Tue</div>
          <div>Wed</div>
          <div>Thu</div>
          <div>Fri</div>
          <div>Sat</div>
        </div>
        <div class="grid" id="grid" role="rowgroup"></div>
        <div class="footer">
          <button class="btn" id="addQuick">＋ Quick Add</button>
          <div style="display: flex; gap: 8px; align-items: center">
            <label class="sr-only" for="toggle-hijri">Show Hijri</label>
            <input type="checkbox" id="toggle-hijri" />
            <span style="font-size: 12px; color: var(--muted)">Hijri</span>
          </div>
        </div>
      </section>
    </main>
    <!-- Bottom Sheet: Add/View Events -->
    <aside
      class="sheet"
      id="sheet"
      aria-hidden="true"
      aria-label="Event Editor"
    >
      <div class="sheet-header" id="sheet-header">
        <div class="drag"></div>
      </div>

      <div class="sheet-body">
        <h3 id="sheet-title">Events</h3>

        <!-- Events List -->
        <div id="events-list" class="events-list" style="display: none">
          <!-- Events will be populated here -->
        </div>
        <!-- Add Event Button -->
        <button id="add-event-btn" class="btn accent" style="display: none">
          ＋ Add Event
        </button>

        <!-- Event Form -->
        <form id="event-form" class="event-form" novalidate>
          <div class="row">
            <label for="ev-title">Title</label>
            <input id="ev-title" placeholder="e.g., Team Meeting" required />
          </div>
          <div class="row">
            <label for="ev-notes">Notes</label>
            <textarea
              id="ev-notes"
              placeholder="Details, location, etc."
            ></textarea>
          </div>
          <div class="row">
            <label for="ev-type">Type</label>
            <select id="ev-type" required>
              <option value="booking">Booking</option>
              <option value="reservation">Reservation</option>
            </select>
          </div>
          <div class="row">
            <label for="ev-meal-type">Meal Type</label>
            <select id="ev-meal-type" required>
              <option value="lunch">Lunch (12:00 PM - 4:00 PM)</option>
              <option value="dinner">Dinner (6:00 PM - 10:00 PM)</option>
            </select>
          </div>
          <div class="row">
            <label>Date & Time</label>
            <div class="datetime-inputs">
              <input id="ev-start-date" type="date" required />
              <input id="ev-start-time" type="time" required />
              <input id="ev-end-time" type="time" required />
            </div>
          </div>
          <div class="row">
            <label for="ev-guest-name">Guest Name</label>
            <input id="ev-guest-name" placeholder="e.g., John Doe" required />
          </div>
          <div class="row">
            <label for="ev-phone">Guest Phone</label>
            <input
              id="ev-phone"
              type="tel"
              placeholder="e.g., +1234567890"
              required
            />
          </div>
          <div class="row">
            <label for="ev-pax">Pax (No. of Guests)</label>
            <input
              id="ev-pax"
              type="number"
              min="1"
              placeholder="e.g., 50"
              required
            />
          </div>
          <div class="row">
            <label for="ev-venue">Venue</label>
            <select id="ev-venue" required>
              <option value="Dar-ul-Khaas">Dar-ul-Khaas</option>
              <option value="Aroos-ul-Bahar">Aroos-ul-Bahar</option>
              <option value="Grand Marquee">Grand Marquee</option>
            </select>
          </div>
          <div class="row">
            <label style="display: flex; align-items: center; gap: 8px">
              <input type="checkbox" id="ev-with-food" style="width: auto" />
              With Food
            </label>
          </div>
          <div class="row meal-fields" id="meal-fields" style="display: none">
            <label for="ev-meal">Menu Type</label>
            <select id="ev-meal">
              <option value="">Select a menu...</option>
              <option value="chicken-qorma">Chicken Qorma</option>
              <option value="mutton-qorma">Mutton Qorma</option>
            </select>
          </div>
          <div class="row meal-fields" id="meal-items-field" style="display: none">
            <div class="meal-items-header">
              <label>Meal Items</label>
              <button type="button" class="btn secondary small" id="add-meal-item">
                + Add Item
              </button>
            </div>
            <div id="meal-items-container" class="meal-items-container">
              <!-- Meal items inputs will be dynamically added here -->
            </div>
          </div>
          <div class="actions">
            <button type="button" class="btn secondary" id="cancel">
              Cancel
            </button>
            <button type="submit" class="btn accent" id="save">Save</button>
          </div>
        </form>
      </div>
    </aside>
    <script src="/assets/script.js"></script>
  </body>
</html>
